{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Navbar</title>
    <link rel="stylesheet" href="{% static 'css/C_catalogo.css' %}">
    <link rel="stylesheet" href="{% static 'css/menu.css' %}">
   
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow">
    <a class="navbar-brand" href="{% url 'vistacliente' %}"><img src="{% static 'icon/7.ico' %}" width="300"></a>
    <div class="collapse navbar-collapse shadow" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'vistacliente' %}">Inicio</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'catalogocliente' %}">Catálogo</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'contactanoscliente' %}">Contáctanos</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="perfilDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Perfil
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="Profile" style="width: 30px; height: 20px;">
                     <path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" clip-rule="evenodd" />
                  </svg>  
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="perfilDropdown">
                  <a class="dropdown-item" href="{% url 'perfilcliente' %}">Ver Perfil</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="{% url 'logout' %}">Cerrar Sesión</a>
              </div>
          </li>

            <div class="carrito" id="carrito">
                <h1>CARRITO</h1>
                <img src="{% static 'Image/carrito.png' %}">
                <div class="count-products">
                    <span id="contador-productos">0</span>
                </div>
            </div>
            
             <div class="container-cart-products">
                <div class="row-product">
                    <!-- Productos se agregarán dinámicamente con JavaScript -->
                </div>
                <div class="container-general">
                    <button class="botonPagar shadow" id="btnPagar">PAGAR</button>
                    <div id="modalP" class="modal hidden">
                        <div class="modal-contentP">    
                            <div class="miacolucci">
                                <div class="metodoPago">
                                    <h1 id="modal-title">Método de Pago:</h1>
                                    <div class="nequi-container shadow">
                                        <div class="formas">
                                            <h1>N. de referencia:</h1>
                                            <input type="text" name="txtCorreo" class="nroReferencia shadow" placeholder="Digita el N. de tu pago" required maxlength="10">
                                            <h2>(Click al logo para info Nequi)</h2>
                                        </div>
                                        <div class="logo-nequi" onclick="openModal('modalNequiSpecific')">
                                            <div class="imagen-nequi">
                                                <img src="{% static 'Image/nequi.png' %}" alt="Nequi">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="modalNequiSpecific" class="modal-nequi">
                                        <div class="modal-nequi-content">
                                            <span class="close-nequi" onclick="closeModal('modalNequiSpecific')">&times;</span>
                                            <img src="{% static 'Image/nequi.png' %}" alt="Nequi" class="modal-nequi-img">
                                            <h2>Método de Pago: Nequi</h2>
                                            <p>Número de Nequi: +57 3026982043</p>
                                            <img class="nequiQR" src="{% static 'Image/nequiQR.jpg' %}">
                                        </div>
                                    </div>
                                    <div class="davi-container shadow">
                                        <div class="formas">
                                            <h1>N. de referencia:</h1>
                                            <input type="text" name="txtCorreo" class="nroReferencia shadow" placeholder="Digita el N. de tu pago" required maxlength="10">
                                            <h2>(Click al logo para info Davi)</h2>
                                        </div>
                                        <div class="logo-davi" onclick="openModal('modalDaviSpecific')">
                                            <div class="imagen-davi">
                                                <img src="{% static 'Image/davip.webp' %}" alt="Davivienda">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="modalDaviSpecific" class="modal-davi">
                                        <div class="modal-davi-content">
                                            <span class="close-davi" onclick="closeModal('modalDaviSpecific')">&times;</span>
                                            <img src="{% static 'Image/davip.png' %}" alt="Davivienda" class="modal-davi-img">
                                            <h2>Método de Pago: DaviPlata</h2>
                                            <p>Número de DaviPlata: +57 3026982043</p>
                                            <img class="nequiQR" src="{% static 'Image/nequiQR.jpg' %}">
                                        </div>
                                    </div>
                                </div>        
                                <div class="infoTotalCarrito">
                                    <div class="infoCarrito">
                                        <span id="equis" class="closeP close">&times;</span>
                                        <div class="productosPagar">
                                            <div class="cajita"></div>
                                        </div>
                                        <div class="totalPagar">
                                            <h1>Total:<br>
                                                $<span id="total-pagar-modal">0.00</span>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="botonComprar">
                                <button type="submit" value="Comprar" id="btnAgregarProducto" class="cart shadow">COMPRAR</button> 
                            </div>
                            <!-- Modal de compra exitosa -->
<!-- Modal de compra exitosa -->
<div id="modalCompraExitosa" class="modal" style="display:none;">
  <div class="modal-content" style="background:#fff; padding:30px; border-radius:20px; text-align:center; max-width:600px; margin:auto;">
    <span id="cerrarModalCompra" style="cursor:pointer; float:right; font-size:24px;">&times;</span>
    <div class="infoTotalCarrito"></div>
    <h2>¡Compra realizada con éxito!</h2>
    <p>Gracias por tu compra.</p>
    <button id="okCompraExitosa" class="btn btn-pinck" style="margin-top:15px;">OK</button>
  </div>
</div>
</div>

<script>
// Cerrar modal con la X
document.getElementById('cerrarModalCompra')?.addEventListener('click', function() {
    document.getElementById('modalCompraExitosa').style.display = 'none';
    location.reload();
});
// Cerrar modal y recargar con el botón OK
document.getElementById('okCompraExitosa')?.addEventListener('click', function() {
    document.getElementById('modalCompraExitosa').style.display = 'none';
    location.reload();
});
</script>
                        </div>
                    </div>
                    <div class="cart-total">
                        <h3>Total:</h3>
                        <span class="total-pagar">$0.00</span>
                    </div>
                </div>
            </div>
        </ul>
    </div>
</nav>

<!-- jQuery (requerido por Bootstrap 4) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Popper.js (requerido por Bootstrap para dropdowns) -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="{% static 'js/catalogo.js' %}"></script>
</body>
</html>